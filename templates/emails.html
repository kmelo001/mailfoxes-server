<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Received Emails</title>
  <!-- Bootstrap CSS for styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
    <h1 class="mb-4">Received Emails</h1>
    <table class="table table-bordered table-striped">
      <thead class="thead-dark">
        <tr>
          <th>ID</th>
          <th>To</th>
          <th>From</th>
          <th>Subject</th>
          <th>Body</th>
          <th>URLs</th>
          <th>Received At</th>
        </tr>
      </thead>
      <tbody>
        {% for email in emails %}
        <tr>
          <td>{{ email.id }}</td>
          <td>{{ email.to_address }}</td>
          <td>{{ email.from_address }}</td>
          <td>{{ email.subject }}</td>
          <td>
            {{ email.body_text[:100] }}{% if email.body_text|length > 100 %}...{% endif %}
          </td>
          <td>
            {% if email.urls %}
              {% for url in email.urls %}
                <a href="{{ url }}" target="_blank">{{ url }}</a><br>
              {% endfor %}
            {% else %}
              No URLs
            {% endif %}
          </td>
          <td>{{ email.received_at }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <!-- Optional JavaScript for Bootstrap (jQuery and Bootstrap Bundle) -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
